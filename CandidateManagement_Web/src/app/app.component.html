<div style="padding: 20px; font-family: Arial, sans-serif;">
  <h1>Candidates Management</h1>
 
  <div style="margin-bottom: 20px;">
    <button (click)="openAddPopup()" style="padding: 8px 16px; margin-right: 10px; cursor: pointer;">
      Add Candidate
    </button>
    <button (click)="downloadExport()" style="padding: 8px 16px; cursor: pointer;">
      Export
    </button>
  </div>
 
  <div style="border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; background-color: #f9f9f9;">
    <h3>Upload Candidates File</h3>
    <div style="margin-bottom: 10px;">
      <input 
        type="file" 
        id="fileInput"
        accept=".txt"
        (change)="onFileSelected($event)" 
        style="margin-right: 10px;"
      />
      <button (click)="submitUploadFile()" style="padding: 8px 16px; cursor: pointer;">
        Upload
      </button>
    </div>
    <p *ngIf="uploadMessage" style="color: green; margin: 10px 0;">{{ uploadMessage }}</p>
    <p *ngIf="uploadError" style="color: red; margin: 10px 0;">{{ uploadError }}</p>
  </div>
 
  <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
    <thead>
      <tr style="background-color: #f0f0f0; border-bottom: 2px solid #ddd;">
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Name</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Nickname</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Email</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let candidate of candidates()" style="border-bottom: 1px solid #ddd;">
        <td style="padding: 10px; border: 1px solid #ddd;">{{ candidate.name }}</td>
        <td style="padding: 10px; border: 1px solid #ddd;">{{ candidate.nickname }}</td>
        <td style="padding: 10px; border: 1px solid #ddd;">{{ candidate.email }}</td>
        <td style="padding: 10px; border: 1px solid #ddd;">
          <button 
            (click)="openEditPopup(candidate)" 
            style="padding: 5px 10px; margin-right: 5px; cursor: pointer;"
          >
            Edit
          </button>
          <button 
            (click)="openSkillPopup(candidate.id!)" 
            style="padding: 5px 10px; cursor: pointer;"
          >
            Add Skill
          </button>
        </td>
      </tr>
    </tbody>
  </table>
 
  <div *ngIf="showAddPopup" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;">
    <div style="background: white; padding: 30px; border-radius: 8px; width: 90%; max-width: 400px; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">
      <h2>Add Candidate</h2>
      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Name</label>
        <input 
          type="text" 
          [(ngModel)]="candidateForm.name" 
          style="width: 100%; padding: 8px; box-sizing: border-box;"
        />
      </div>
      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Nickname</label>
        <input 
          type="text" 
          [(ngModel)]="candidateForm.nickname" 
          style="width: 100%; padding: 8px; box-sizing: border-box;"
        />
      </div>
      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Email</label>
        <input 
          type="email" 
          [(ngModel)]="candidateForm.email" 
          style="width: 100%; padding: 8px; box-sizing: border-box;"
        />
      </div>
      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Years of Experience</label>
        <input 
          type="number" 
          [(ngModel)]="candidateForm.yearsOfExperience" 
          style="width: 100%; padding: 8px; box-sizing: border-box;"
        />
      </div>
      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Max Number of Skills (Optional)</label>
        <input 
          type="number" 
          [(ngModel)]="candidateForm.maxNumSkills" 
          style="width: 100%; padding: 8px; box-sizing: border-box;"
        />
      </div>
      <div style="display: flex; justify-content: flex-end; gap: 10px;">
        <button (click)="closeAddPopup()" style="padding: 8px 16px; cursor: pointer;">
          Cancel
        </button>
        <button (click)="submitAddCandidate()" style="padding: 8px 16px; background-color: #4CAF50; color: white; border: none; cursor: pointer;">
          Add
        </button>
      </div>
    </div>
  </div>
 
  <div *ngIf="showEditPopup" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;">
    <div style="background: white; padding: 30px; border-radius: 8px; width: 90%; max-width: 400px; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">
      <h2>Edit Candidate</h2>
      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Name</label>
        <input 
          type="text" 
          [(ngModel)]="candidateForm.name" 
          style="width: 100%; padding: 8px; box-sizing: border-box;"
        />
      </div>
      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Nickname</label>
        <input 
          type="text" 
          [(ngModel)]="candidateForm.nickname" 
          style="width: 100%; padding: 8px; box-sizing: border-box;"
        />
      </div>
      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Email</label>
        <input 
          type="email" 
          [(ngModel)]="candidateForm.email" 
          style="width: 100%; padding: 8px; box-sizing: border-box;"
        />
      </div>
      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Years of Experience</label>
        <input 
          type="number" 
          [(ngModel)]="candidateForm.yearsOfExperience" 
          style="width: 100%; padding: 8px; box-sizing: border-box;"
        />
      </div>
      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Max Number of Skills (Optional)</label>
        <input 
          type="number" 
          [(ngModel)]="candidateForm.maxNumSkills" 
          style="width: 100%; padding: 8px; box-sizing: border-box;"
        />
      </div>
      <div style="display: flex; justify-content: flex-end; gap: 10px;">
        <button (click)="closeEditPopup()" style="padding: 8px 16px; cursor: pointer;">
          Cancel
        </button>
        <button (click)="submitEditCandidate()" style="padding: 8px 16px; background-color: #2196F3; color: white; border: none; cursor: pointer;">
          Update
        </button>
      </div>
    </div>
  </div>
 
  <div *ngIf="showSkillPopup" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;">
    <div style="background: white; padding: 30px; border-radius: 8px; width: 90%; max-width: 400px; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">
      <h2>Add Skill</h2>
      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Skill Name</label>
        <input 
          type="text" 
          [(ngModel)]="skillForm.name" 
          style="width: 100%; padding: 8px; box-sizing: border-box;"
        />
      </div>
      <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;">Gain Date</label>
        <input 
          type="date" 
          [(ngModel)]="skillForm.gainDate" 
          style="width: 100%; padding: 8px; box-sizing: border-box;"
        />
      </div>
      <div style="display: flex; justify-content: flex-end; gap: 10px;">
        <button (click)="closeSkillPopup()" style="padding: 8px 16px; cursor: pointer;">
          Cancel
        </button>
        <button (click)="submitAddSkill()" style="padding: 8px 16px; background-color: #FF9800; color: white; border: none; cursor: pointer;">
          Add Skill
        </button>
      </div>
    </div>
  </div>
</div>
